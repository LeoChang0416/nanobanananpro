import{_ as m,u as f,r as u,c as w,d as a,t as r,e as c,v,s as h,a as b}from"./index-CGveUXC2.js";const k={class:"login-view"},y={class:"card"},V={class:"title"},x={class:"form"},B=["disabled"],C=["disabled"],D={__name:"LoginView",setup(L){const p=h(),d=f(),l=u("login"),t=u(""),o=u(""),n=u(!1),_=()=>{l.value=l.value==="login"?"register":"login"},g=async()=>{var i,e;if(!(!t.value||!o.value||n.value)){n.value=!0;try{l.value==="login"?await d.login({username:t.value,password:o.value}):await d.register({username:t.value,password:o.value}),p.push("/")}catch(s){alert(((e=(i=s==null?void 0:s.response)==null?void 0:i.data)==null?void 0:e.error)||"操作失败")}finally{n.value=!1}}};return(i,e)=>(b(),w("div",k,[a("div",y,[a("div",V,r(l.value==="login"?"登录":"注册"),1),a("div",x,[c(a("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),class:"input",placeholder:"用户名",autocomplete:"username"},null,512),[[v,t.value]]),c(a("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),class:"input",type:"password",placeholder:"密码",autocomplete:"current-password"},null,512),[[v,o.value]]),a("button",{class:"btn",disabled:n.value||!t.value||!o.value,onClick:g},r(n.value?"处理中...":l.value==="login"?"登录":"注册"),9,B),a("button",{class:"link",disabled:n.value,onClick:_},r(l.value==="login"?"没有账号？去注册":"已有账号？去登录"),9,C)])])]))}},U=m(D,[["__scopeId","data-v-d14e5457"]]);export{U as default};
