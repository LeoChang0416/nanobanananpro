import{_ as V,r as c,j as g,o as x,c as n,d as s,p as v,g as C,t as f,e as R,i as b,F as _,h as y,q as h,B as z,C as B,s as N,a as l,k as D,x as F}from"./index-CGveUXC2.js";import{u as M,I as E,a as G}from"./ImageModal-D3XuygON.js";const U={class:"gallery-view"},j={class:"main-content"},q={class:"container"},A={class:"gallery-header"},L={class:"header-row"},O={class:"count"},T={key:0,class:"filter"},$=["value"],H={key:0,class:"loading"},J={key:1,class:"empty"},K={key:2,class:"image-grid"},P={__name:"GalleryView",setup(Q){const o=M(),k=N(),d=c(!1),u=c(null),r=c(""),m=g(()=>{const t=new Set;return(o.images||[]).forEach(e=>t.add(e.username||"åŒ¿å")),Array.from(t).sort((e,i)=>e.localeCompare(i,"zh-CN"))}),p=g(()=>r.value?(o.images||[]).filter(t=>(t.username||"åŒ¿å")===r.value):o.images),w=t=>{u.value=t,d.value=!0},I=async t=>{if(confirm("ç¡®å®šè¦åˆ é™¤è¿™å¼ å›¾ç‰‡å—ï¼Ÿ"))try{await o.deleteImage(t)}catch{alert("åˆ é™¤å¤±è´¥")}},S=async t=>{const e=(t.urls||[]).map((i,a)=>({preview:i,base64:i,file:null}));o.updateFormState({prompt:t.prompt,aspectRatio:t.aspectRatio,imageSize:t.imageSize,referenceImages:e}),o.saveFormState({prompt:t.prompt,aspectRatio:t.aspectRatio,imageSize:t.imageSize}),k.push("/")};return x(()=>{o.fetchImages()}),(t,e)=>{const i=B("router-link");return l(),n("div",U,[s("main",j,[s("div",q,[s("div",A,[e[4]||(e[4]=s("h1",{class:"title"},"ä½œå“é›†",-1)),s("div",L,[s("p",O,"å…± "+f(p.value.length)+" å¼ ä½œå“",1),m.value.length>1?(l(),n("div",T,[e[3]||(e[3]=s("label",{class:"filter-label"},"ç”¨æˆ·",-1)),R(s("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),class:"filter-select"},[e[2]||(e[2]=s("option",{value:""},"å…¨éƒ¨",-1)),(l(!0),n(_,null,y(m.value,a=>(l(),n("option",{key:a,value:a},f(a),9,$))),128))],512),[[b,r.value]])])):C("",!0)])]),h(o).loading?(l(),n("div",H,"åŠ è½½ä¸­...")):h(o).images.length===0?(l(),n("div",J,[e[6]||(e[6]=s("p",{class:"empty-icon"},"ðŸŽ¨",-1)),e[7]||(e[7]=s("p",{class:"empty-text"},"è¿˜æ²¡æœ‰ä½œå“",-1)),v(i,{to:"/",class:"empty-link"},{default:z(()=>[...e[5]||(e[5]=[D("åŽ»åˆ›ä½œ",-1)])]),_:1})])):(l(),n("div",K,[(l(!0),n(_,null,y(p.value,a=>(l(),F(G,{key:a.id,image:a,onView:w,onDelete:I,onRegenerate:S},null,8,["image"]))),128))]))])]),v(E,{visible:d.value,image:u.value,onClose:e[1]||(e[1]=a=>d.value=!1)},null,8,["visible","image"])])}}},Y=V(P,[["__scopeId","data-v-467567e4"]]);export{Y as default};
